{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///apirequest.js","webpack:///webpack/bootstrap fbac3b6f76d5bd893717","webpack:///./apirequest.js","webpack:///./generateapirequest.js","webpack:///./getparamvalue.js","webpack:///./requestparams.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","apiopts","arguments","length","undefined","responseTransform","responseTransformer","data","paramTransform","paramTransformer","pars","get","url","params","options","_generateapirequest2","Object","assign","method","post","put","delete","defineProperty","value","_generateapirequest","createParams","_requestparams2","runRequest","parse","fetch","defaultResponseTransform","resp","json","then","ok","Promise","reject","generateApirequest","paramsOverride","optionsOverride","all","map","_getparamvalue2","_getparamvalue","_requestparams","getparamvalue","v","_this","resolve","_classCallCheck","instance","Constructor","TypeError","_typeof","Symbol","iterator","constructor","prototype","_createClass","defineProperties","target","props","i","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","RequestParams","genurl","genparams","genoptions","urlParams","match","paramsUsed","slice","reduce","replace","keys","filter","indexOf","k","Array","encodeURIComponent","join","body"],"mappings":"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","file":"apirequest.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"apirequest\"] = factory();\n\telse\n\t\troot[\"apirequest\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"apirequest\"] = factory();\n\telse\n\t\troot[\"apirequest\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.default = factory;\n\t\n\tvar _generateapirequest = __webpack_require__(1);\n\t\n\tvar _generateapirequest2 = _interopRequireDefault(_generateapirequest);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// ApiRequest type definition\n\tfunction factory() {\n\t\tvar apiopts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t\n\t\tvar responseTransform = apiopts.responseTransformer || function (data) {\n\t\t\treturn data;\n\t\t};\n\t\tvar paramTransform = apiopts.paramTransformer || function (pars) {\n\t\t\treturn pars;\n\t\t};\n\t\n\t\treturn {\n\t\t\tget: function get(url) {\n\t\t\t\tvar params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\t\t\tvar options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\t\t\treturn (0, _generateapirequest2.default)(url, params, Object.assign({}, { method: 'GET' }, options), paramTransform, responseTransform);\n\t\t\t},\n\t\n\t\t\tpost: function post(url) {\n\t\t\t\tvar params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\t\t\tvar options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\t\t\treturn (0, _generateapirequest2.default)(url, params, Object.assign({}, { method: 'POST' }, options), paramTransform, responseTransform);\n\t\t\t},\n\t\n\t\t\tput: function put(url) {\n\t\t\t\tvar params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\t\t\tvar options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\t\t\treturn (0, _generateapirequest2.default)(url, params, Object.assign({}, { method: 'PUT' }, options), paramTransform, responseTransform);\n\t\t\t},\n\t\n\t\t\tdelete: function _delete(url) {\n\t\t\t\tvar params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\t\t\tvar options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\t\t\treturn (0, _generateapirequest2.default)(url, params, Object.assign({}, { method: 'DELETE' }, options), paramTransform, responseTransform);\n\t\t\t}\n\t\t};\n\t}\n\t/* global Response */\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.createParams = createParams;\n\texports.default = generateApirequest;\n\t\n\tvar _getparamvalue = __webpack_require__(2);\n\t\n\tvar _getparamvalue2 = _interopRequireDefault(_getparamvalue);\n\t\n\tvar _requestparams = __webpack_require__(3);\n\t\n\tvar _requestparams2 = _interopRequireDefault(_requestparams);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction createParams(pars) {\n\t\tvar params = Object.assign({}, pars[1], pars[2]);\n\t\tvar options = Object.assign({}, pars[3], pars[4]);\n\t\tvar url = pars[0];\n\t\treturn new _requestparams2.default(url, params, options);\n\t}\n\t\n\tfunction runRequest(pars) {\n\t\tvar params = pars.parse();\n\t\treturn fetch(params.url, params.options);\n\t}\n\t\n\tfunction defaultResponseTransform(resp) {\n\t\treturn resp.json().then(function (json) {\n\t\t\treturn resp.ok ? json : Promise.reject(json);\n\t\t});\n\t}\n\t\n\tfunction generateApirequest(url, params, options, paramTransform, responseTransform) {\n\t\treturn function () {\n\t\t\tvar paramsOverride = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\t\tvar optionsOverride = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\n\t\t\treturn Promise.all([url, params, paramsOverride, options, optionsOverride].map(_getparamvalue2.default))\n\t\t\t// create params from all the passed promises and whatnot\n\t\t\t.then(createParams)\n\t\t\t// run a custom user provided transformer on the request params object\n\t\t\t.then(paramTransform)\n\t\t\t// fire the fetch request\n\t\t\t.then(runRequest)\n\t\t\t// run the response through a default transformer that checks simply for valid json\n\t\t\t.then(defaultResponseTransform)\n\t\t\t// run the custom user provided response transformer\n\t\t\t.then(responseTransform);\n\t\t};\n\t}\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.default = getparamvalue;\n\t\n\t// returns a promise that resolves with the final value of the passed param:\n\t// - resolves functions that return a promise, and return with the promises value\n\t// - resolves functions and return with the returned value\n\t// - resolves with the passed in value\n\tfunction getparamvalue(v) {\n\t\tvar _this = this;\n\t\n\t\treturn new Promise(function (resolve) {\n\t\t\tif (typeof v === 'function') {\n\t\t\t\tresolve(Promise.resolve(v.call(_this)));\n\t\t\t} else {\n\t\t\t\tresolve(v);\n\t\t\t}\n\t\t});\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t// TODO: refactor the hell out of the class\n\tvar RequestParams = function () {\n\t\tfunction RequestParams(url) {\n\t\t\tvar params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\t\tvar options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t\t\t_classCallCheck(this, RequestParams);\n\t\n\t\t\tthis.params = params;\n\t\t\tthis.options = options;\n\t\t\tthis.url = url;\n\t\t}\n\t\n\t\t_createClass(RequestParams, [{\n\t\t\tkey: 'parse',\n\t\t\tvalue: function parse() {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\t// check if the url contains any template strings, replace them with values in the params object\n\t\t\t\t// returned object contains the url, the final query params and request options\n\t\t\t\tvar genurl = this.url;\n\t\t\t\tvar genparams = this.params;\n\t\t\t\tvar genoptions = this.options;\n\t\n\t\t\t\tvar urlParams = this.url.match(/\\{\\{(.+?)\\}\\}/g);\n\t\t\t\tif (urlParams) {\n\t\t\t\t\t(function () {\n\t\t\t\t\t\tvar paramsUsed = urlParams.map(function (p) {\n\t\t\t\t\t\t\treturn p.slice(2, -2);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tgenurl = paramsUsed.reduce(function (url, p) {\n\t\t\t\t\t\t\treturn url.replace('{{' + p + '}}', _this.params[p]);\n\t\t\t\t\t\t}, _this.url);\n\t\t\t\t\t\tgenparams = Object.keys(_this.params).filter(function (p) {\n\t\t\t\t\t\t\treturn paramsUsed.indexOf(p) === -1;\n\t\t\t\t\t\t}).reduce(function (p, k) {\n\t\t\t\t\t\t\tp[k] = _this.params[k];\n\t\t\t\t\t\t\treturn p;\n\t\t\t\t\t\t}, {});\n\t\t\t\t\t})();\n\t\t\t\t}\n\t\n\t\t\t\t// handle query params nicely for GET requests\n\t\t\t\tif (this.options.method === 'GET' && (_typeof(this.params) === 'object' && Object.keys(genparams).length || this.params instanceof Array && genparams.length)) {\n\t\t\t\t\t// append data to the url as encoded query params\n\t\t\t\t\tgenurl += '?' + Object.keys(genparams).map(function (key) {\n\t\t\t\t\t\treturn key + '=' + encodeURIComponent(genparams[key]);\n\t\t\t\t\t}).join('&');\n\t\t\t\t\t// empty the params array, since they're now part of the query\n\t\t\t\t\tgenparams = {};\n\t\t\t\t}\n\t\n\t\t\t\tgenoptions = Object.assign({}, this.options, {\n\t\t\t\t\tbody: genparams,\n\t\t\t\t\tjson: true\n\t\t\t\t});\n\t\t\t\treturn { url: genurl, options: genoptions };\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn RequestParams;\n\t}();\n\t\n\texports.default = RequestParams;\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** apirequest.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap fbac3b6f76d5bd893717\n **/","// @flow\n/* global Response */\nimport generateApirequest from './generateapirequest';\nimport type RequestParams from './requestparams';\n\n// ApiRequest type definition\ntype ApiRequest = {\n\tget(url: string, params: Object, options: Object): Function,\n\tpost(url: string, params: Object, options: Object): Function,\n\tput(url: string, params: Object, options: Object): Function,\n\tdelete(url: string, params: Object, options: Object): Function\n}\n\nexport default function factory(apiopts: Object = {}): ApiRequest {\n\n\tconst responseTransform = apiopts.responseTransformer || ((data: Promise<Response>): Promise<Response> => data);\n\tconst paramTransform = apiopts.paramTransformer || ((pars: RequestParams): RequestParams => pars);\n\n\treturn {\n\t\tget: (url: string, params: Object = {}, options: Object = {}): Function =>\n\t\t\tgenerateApirequest(\n\t\t\t\turl,\n\t\t\t\tparams,\n\t\t\t\tObject.assign({}, {method: 'GET'}, options),\n\t\t\t\tparamTransform, responseTransform),\n\n\t\tpost: (url: string, params: Object = {}, options: Object = {}): Function =>\n\t\t\tgenerateApirequest(\n\t\t\t\turl,\n\t\t\t\tparams,\n\t\t\t\tObject.assign({}, {method: 'POST'}, options),\n\t\t\t\tparamTransform, responseTransform),\n\n\t\tput: (url: string, params: Object = {}, options: Object = {}): Function =>\n\t\t\tgenerateApirequest(\n\t\t\t\turl,\n\t\t\t\tparams,\n\t\t\t\tObject.assign({}, {method: 'PUT'}, options),\n\t\t\t\tparamTransform, responseTransform),\n\n\t\tdelete: (url: string, params: Object = {}, options: Object = {}): Function =>\n\t\t\tgenerateApirequest(\n\t\t\t\turl,\n\t\t\t\tparams,\n\t\t\t\tObject.assign({}, {method: 'DELETE'}, options),\n\t\t\t\tparamTransform, responseTransform)\n\t};\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./apirequest.js\n **/","// @flow\nimport getparamvalue from './getparamvalue';\nimport RequestParams from './requestparams';\n\nexport function createParams(pars: Array<any>): RequestParams {\n\tconst params = Object.assign({}, pars[1], pars[2]);\n\tconst options = Object.assign({}, pars[3], pars[4]);\n\tconst url = pars[0];\n\treturn new RequestParams(url, params, options);\n}\n\nfunction runRequest(pars: RequestParams): Promise<Response> {\n\tconst params = pars.parse();\n\treturn fetch(params.url, params.options);\n}\n\nfunction defaultResponseTransform(resp: Response): Promise<any> {\n\treturn resp\n\t\t.json()\n\t\t.then(json => resp.ok ? json : Promise.reject(json));\n}\n\nexport default function generateApirequest(url: string, params: Object, options: Object, paramTransform: Function, responseTransform: Function): Function {\n\treturn (paramsOverride: Object = {}, optionsOverride: Object = {}): Promise<Response> => {\n\t\treturn Promise.all([url, params, paramsOverride, options, optionsOverride].map(getparamvalue))\n\t\t\t// create params from all the passed promises and whatnot\n\t\t\t.then(createParams)\n\t\t\t// run a custom user provided transformer on the request params object\n\t\t\t.then(paramTransform)\n\t\t\t// fire the fetch request\n\t\t\t.then(runRequest)\n\t\t\t// run the response through a default transformer that checks simply for valid json\n\t\t\t.then(defaultResponseTransform)\n\t\t\t// run the custom user provided response transformer\n\t\t\t.then(responseTransform);\n\t};\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./generateapirequest.js\n **/","// @flow\n// returns a promise that resolves with the final value of the passed param:\n// - resolves functions that return a promise, and return with the promises value\n// - resolves functions and return with the returned value\n// - resolves with the passed in value\nexport default function getparamvalue<T>(v: T): Promise<T> {\n\treturn new Promise((resolve): void => {\n\t\tif (typeof v === 'function') {\n\t\t\tresolve(Promise.resolve(v.call(this)));\n\t\t} else {\n\t\t\tresolve(v);\n\t\t}\n\t});\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./getparamvalue.js\n **/","// @flow\n// TODO: refactor the hell out of the class\nexport default class RequestParams {\n\turl: string;\n\tparams: Object;\n\toptions: Object;\n\n\tconstructor(url: string, params: Object = {}, options: Object = {}) {\n\t\tthis.params = params;\n\t\tthis.options = options;\n\t\tthis.url = url;\n\t}\n\n\tparse() {\n\t\t// check if the url contains any template strings, replace them with values in the params object\n\t\t// returned object contains the url, the final query params and request options\n\t\tlet genurl = this.url;\n\t\tlet genparams = this.params;\n\t\tlet genoptions = this.options;\n\n\t\tconst urlParams = this.url.match(/\\{\\{(.+?)\\}\\}/g);\n\t\tif (urlParams) {\n\t\t\tconst paramsUsed = urlParams.map((p) => p.slice(2, -2));\n\t\t\tgenurl = paramsUsed.reduce((url, p) => url.replace('{{' + p + '}}', this.params[p]), this.url);\n\t\t\tgenparams = Object.keys(this.params)\n\t\t\t\t.filter((p) => paramsUsed.indexOf(p) === -1)\n\t\t\t\t.reduce((p, k) => {\n\t\t\t\t\tp[k] = this.params[k];\n\t\t\t\t\treturn p;\n\t\t\t\t}, {});\n\t\t}\n\n\t\t// handle query params nicely for GET requests\n\t\tif (this.options.method === 'GET' && ((typeof this.params === 'object' && Object.keys(genparams).length) || (this.params instanceof Array && genparams.length))) {\n\t\t\t// append data to the url as encoded query params\n\t\t\tgenurl += '?' + Object.keys(genparams)\n\t\t\t\t.map(key => key + '=' + encodeURIComponent(genparams[key]))\n\t\t\t\t.join('&');\n\t\t\t// empty the params array, since they're now part of the query\n\t\t\tgenparams = {};\n\t\t}\n\n\t\tgenoptions = Object.assign({}, this.options, {\n\t\t\tbody: genparams,\n\t\t\tjson: true\n\t\t});\n\t\treturn {url: genurl, options: genoptions};\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./requestparams.js\n **/"],"sourceRoot":""}