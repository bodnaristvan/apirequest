{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///apirequest.js","webpack:///webpack/bootstrap 1fa70a19d50fda0607f1","webpack:///./apirequest.js","webpack:///./requestparams.js","webpack:///./generateapirequest.js","webpack:///./getparamvalue.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","apiopts","arguments","length","undefined","responseTransform","responseTransformer","data","paramTransform","paramTransformer","pars","get","url","params","options","_generateapirequest2","Object","assign","method","post","put","delete","defineProperty","value","_requestparams","_generateapirequest","_classCallCheck","instance","Constructor","TypeError","_typeof","Symbol","iterator","constructor","prototype","_createClass","defineProperties","target","props","i","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","RequestParams","_this","genurl","genparams","genoptions","urlParams","match","paramsUsed","map","slice","reduce","replace","keys","filter","indexOf","k","Array","encodeURIComponent","join","body","json","createParams","_requestparams2","runRequest","parse","fetch","defaultResponseTransform","resp","then","ok","Promise","reject","generateApirequest","paramsOverride","optionsOverride","all","_getparamvalue2","_getparamvalue","getparamvalue","v","resolve"],"mappings":"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","file":"apirequest.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"apirequest\"] = factory();\n\telse\n\t\troot[\"apirequest\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"apirequest\"] = factory();\n\telse\n\t\troot[\"apirequest\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.default = factory;\n\t\n\tvar _requestparams = __webpack_require__(1);\n\t\n\tvar _requestparams2 = _interopRequireDefault(_requestparams);\n\t\n\tvar _generateapirequest = __webpack_require__(2);\n\t\n\tvar _generateapirequest2 = _interopRequireDefault(_generateapirequest);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// ApiRequest type definition\n\tfunction factory() {\n\t\tvar apiopts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t\n\t\tvar responseTransform = apiopts.responseTransformer || function (data) {\n\t\t\treturn data;\n\t\t};\n\t\tvar paramTransform = apiopts.paramTransformer || function (pars) {\n\t\t\treturn pars;\n\t\t};\n\t\n\t\treturn {\n\t\t\tget: function get(url) {\n\t\t\t\tvar params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\t\t\tvar options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\t\t\treturn (0, _generateapirequest2.default)(url, params, Object.assign({}, { method: 'GET' }, options), paramTransform, responseTransform);\n\t\t\t},\n\t\n\t\t\tpost: function post(url) {\n\t\t\t\tvar params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\t\t\tvar options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\t\t\treturn (0, _generateapirequest2.default)(url, params, Object.assign({}, { method: 'POST' }, options), paramTransform, responseTransform);\n\t\t\t},\n\t\n\t\t\tput: function put(url) {\n\t\t\t\tvar params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\t\t\tvar options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\t\t\treturn (0, _generateapirequest2.default)(url, params, Object.assign({}, { method: 'PUT' }, options), paramTransform, responseTransform);\n\t\t\t},\n\t\n\t\t\tdelete: function _delete(url) {\n\t\t\t\tvar params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\t\t\tvar options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\t\t\treturn (0, _generateapirequest2.default)(url, params, Object.assign({}, { method: 'DELETE' }, options), paramTransform, responseTransform);\n\t\t\t}\n\t\t};\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t// TODO: refactor the hell out of the class\n\tvar RequestParams = function () {\n\t\tfunction RequestParams(url) {\n\t\t\tvar params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\t\tvar options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t\t\t_classCallCheck(this, RequestParams);\n\t\n\t\t\tthis.params = params;\n\t\t\tthis.options = options;\n\t\t\tthis.url = url;\n\t\t}\n\t\n\t\t_createClass(RequestParams, [{\n\t\t\tkey: 'parse',\n\t\t\tvalue: function parse() {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\t// check if the url contains any template strings, replace them with values in the params object\n\t\t\t\t// returned object contains the url, the final query params and request options\n\t\t\t\tvar genurl = this.url;\n\t\t\t\tvar genparams = this.params;\n\t\t\t\tvar genoptions = this.options;\n\t\n\t\t\t\tvar urlParams = this.url.match(/\\{\\{(.+?)\\}\\}/g);\n\t\t\t\tif (urlParams) {\n\t\t\t\t\tvar paramsUsed = urlParams.map(function (p) {\n\t\t\t\t\t\treturn p.slice(2, -2);\n\t\t\t\t\t});\n\t\t\t\t\tgenurl = paramsUsed.reduce(function (url, p) {\n\t\t\t\t\t\treturn url.replace('{{' + p + '}}', _this.params[p]);\n\t\t\t\t\t}, this.url);\n\t\t\t\t\tgenparams = Object.keys(this.params).filter(function (p) {\n\t\t\t\t\t\treturn paramsUsed.indexOf(p) === -1;\n\t\t\t\t\t}).reduce(function (p, k) {\n\t\t\t\t\t\tp[k] = _this.params[k];\n\t\t\t\t\t\treturn p;\n\t\t\t\t\t}, {});\n\t\t\t\t}\n\t\n\t\t\t\t// handle query params nicely for GET requests\n\t\t\t\tif (this.options.method === 'GET' && (_typeof(this.params) === 'object' && Object.keys(genparams).length || this.params instanceof Array && genparams.length)) {\n\t\t\t\t\t// append data to the url as encoded query params\n\t\t\t\t\tgenurl += '?' + Object.keys(genparams).map(function (key) {\n\t\t\t\t\t\treturn key + '=' + encodeURIComponent(genparams[key]);\n\t\t\t\t\t}).join('&');\n\t\t\t\t\t// empty the params array, since they're now part of the query\n\t\t\t\t\tgenparams = {};\n\t\t\t\t}\n\t\n\t\t\t\tgenoptions = Object.assign({}, this.options, {\n\t\t\t\t\tbody: genparams,\n\t\t\t\t\tjson: true\n\t\t\t\t});\n\t\t\t\treturn { url: genurl, options: genoptions };\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn RequestParams;\n\t}();\n\t\n\texports.default = RequestParams;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.createParams = createParams;\n\texports.default = generateApirequest;\n\t\n\tvar _getparamvalue = __webpack_require__(3);\n\t\n\tvar _getparamvalue2 = _interopRequireDefault(_getparamvalue);\n\t\n\tvar _requestparams = __webpack_require__(1);\n\t\n\tvar _requestparams2 = _interopRequireDefault(_requestparams);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction createParams(pars) {\n\t\tvar params = Object.assign({}, pars[1], pars[2]);\n\t\tvar options = Object.assign({}, pars[3], pars[4]);\n\t\tvar url = pars[0];\n\t\treturn new _requestparams2.default(url, params, options);\n\t}\n\t\n\tfunction runRequest(pars) {\n\t\tvar params = pars.parse();\n\t\treturn fetch(params.url, params.options);\n\t}\n\t\n\tfunction defaultResponseTransform(resp) {\n\t\treturn resp.json().then(function (json) {\n\t\t\treturn resp.ok ? json : Promise.reject(json);\n\t\t});\n\t}\n\t\n\tfunction generateApirequest(url, params, options, paramTransform, responseTransform) {\n\t\treturn function () {\n\t\t\tvar paramsOverride = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\t\tvar optionsOverride = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\n\t\t\treturn Promise.all([url, params, paramsOverride, options, optionsOverride].map(_getparamvalue2.default))\n\t\t\t// create params from all the passed promises and whatnot\n\t\t\t.then(createParams)\n\t\t\t// run a custom user provided transformer on the request params object\n\t\t\t.then(paramTransform)\n\t\t\t// fire the fetch request\n\t\t\t.then(runRequest)\n\t\t\t// run the response through a default transformer that checks simply for valid json\n\t\t\t.then(defaultResponseTransform)\n\t\t\t// run the custom user provided response transformer\n\t\t\t.then(responseTransform);\n\t\t};\n\t}\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.default = getparamvalue;\n\t\n\t// returns a promise that resolves with the final value of the passed param:\n\t// - resolves functions that return a promise, and return with the promises value\n\t// - resolves functions and return with the returned value\n\t// - resolves with the passed in value\n\tfunction getparamvalue(v) {\n\t\tvar _this = this;\n\t\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tif (typeof v === 'function') {\n\t\t\t\tresolve(Promise.resolve(v.call(_this)));\n\t\t\t} else {\n\t\t\t\tresolve(v);\n\t\t\t}\n\t\t});\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** apirequest.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 1fa70a19d50fda0607f1\n **/","// @flow\nimport RequestParams from './requestparams';\nimport generateApirequest from './generateapirequest';\n\n// ApiRequest type definition\ntype ApiRequest = {\n\tget(url: string, params: Object, options: Object): Function,\n\tpost(url: string, params: Object, options: Object): Function,\n\tput(url: string, params: Object, options: Object): Function,\n\tdelete(url: string, params: Object, options: Object): Function\n}\n\nexport default function factory(apiopts: Object = {}): ApiRequest {\n\n\tlet responseTransform = apiopts.responseTransformer || ((data: Promise<Response>): Promise<Response> => data);\n\tlet paramTransform = apiopts.paramTransformer || ((pars: RequestParams): RequestParams => pars);\n\n\treturn {\n\t\tget: (url: string, params: Object = {}, options: Object = {}): Function =>\n\t\t\tgenerateApirequest(\n\t\t\t\turl,\n\t\t\t\tparams,\n\t\t\t\tObject.assign({}, {method: 'GET'}, options),\n\t\t\t\tparamTransform, responseTransform),\n\n\t\tpost: (url: string, params: Object = {}, options: Object = {}): Function =>\n\t\t\tgenerateApirequest(\n\t\t\t\turl,\n\t\t\t\tparams,\n\t\t\t\tObject.assign({}, {method: 'POST'}, options),\n\t\t\t\tparamTransform, responseTransform),\n\n\t\tput: (url: string, params: Object = {}, options: Object = {}): Function =>\n\t\t\tgenerateApirequest(\n\t\t\t\turl,\n\t\t\t\tparams,\n\t\t\t\tObject.assign({}, {method: 'PUT'}, options),\n\t\t\t\tparamTransform, responseTransform),\n\n\t\tdelete: (url: string, params: Object = {}, options: Object = {}): Function =>\n\t\t\tgenerateApirequest(\n\t\t\t\turl,\n\t\t\t\tparams,\n\t\t\t\tObject.assign({}, {method: 'DELETE'}, options),\n\t\t\t\tparamTransform, responseTransform)\n\t}\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./apirequest.js\n **/","// @flow\n// TODO: refactor the hell out of the class\nexport default class RequestParams {\n\turl: string;\n\tparams: Object;\n\toptions: Object;\n\n\tconstructor(url: string, params: Object = {}, options: Object = {}) {\n\t\tthis.params = params;\n\t\tthis.options = options;\n\t\tthis.url = url;\n\t}\n\n\tparse() {\n\t\t// check if the url contains any template strings, replace them with values in the params object\n\t\t// returned object contains the url, the final query params and request options\n\t\tlet genurl = this.url;\n\t\tlet genparams = this.params;\n\t\tlet genoptions = this.options;\n\n\t\tlet urlParams = this.url.match(/\\{\\{(.+?)\\}\\}/g);\n\t\tif (urlParams) {\n\t\t\tvar paramsUsed = urlParams.map((p) => p.slice(2, -2));\n\t\t\tgenurl = paramsUsed.reduce((url, p) => url.replace('{{' + p + '}}', this.params[p]), this.url);\n\t\t\tgenparams = Object.keys(this.params)\n\t\t\t\t.filter((p) => paramsUsed.indexOf(p) === -1)\n\t\t\t\t.reduce((p, k) => {\n\t\t\t\t\tp[k] = this.params[k];\n\t\t\t\t\treturn p;\n\t\t\t\t}, {});\n\t\t}\n\n\t\t// handle query params nicely for GET requests\n\t\tif (this.options.method === 'GET' && ((typeof this.params === 'object' && Object.keys(genparams).length) || (this.params instanceof Array && genparams.length))) {\n\t\t\t// append data to the url as encoded query params\n\t\t\tgenurl += '?' + Object.keys(genparams)\n\t\t\t\t.map(key => key + '=' + encodeURIComponent(genparams[key]))\n\t\t\t\t.join('&');\n\t\t\t// empty the params array, since they're now part of the query\n\t\t\tgenparams = {};\n\t\t}\n\n\t\tgenoptions = Object.assign({}, this.options, {\n\t\t\tbody: genparams,\n\t\t\tjson: true\n\t\t});\n\t\treturn {url: genurl, options: genoptions};\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./requestparams.js\n **/","// @flow\nimport getparamvalue from './getparamvalue';\nimport RequestParams from './requestparams';\n\nexport function createParams(pars: Array<any>): RequestParams {\n\tlet params = Object.assign({}, pars[1], pars[2]);\n\tlet options = Object.assign({}, pars[3], pars[4]);\n\tlet url = pars[0];\n\treturn new RequestParams(url, params, options);\n}\n\nfunction runRequest(pars: RequestParams): Promise<Response> {\n  let params = pars.parse();\n  return fetch(params.url, params.options);\n}\n\nfunction defaultResponseTransform(resp: Response): Promise<any> {\n\treturn resp\n\t\t.json()\n\t\t.then(json => resp.ok ? json : Promise.reject(json));\n}\n\nexport default function generateApirequest(url: string, params: Object, options: Object, paramTransform: Function, responseTransform: Function): Function {\n\t\treturn (paramsOverride: Object = {}, optionsOverride: Object = {}): Promise<Response> => {\n\t\t\treturn Promise.all([url, params, paramsOverride, options, optionsOverride].map(getparamvalue))\n\t\t\t\t// create params from all the passed promises and whatnot\n\t\t\t\t.then(createParams)\n\t\t\t\t// run a custom user provided transformer on the request params object\n\t\t\t\t.then(paramTransform)\n\t\t\t\t// fire the fetch request\n\t\t\t\t.then(runRequest)\n\t\t\t\t// run the response through a default transformer that checks simply for valid json\n\t\t\t\t.then(defaultResponseTransform)\n\t\t\t\t// run the custom user provided response transformer\n\t\t\t\t.then(responseTransform);\n\t\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./generateapirequest.js\n **/","// @flow\n// returns a promise that resolves with the final value of the passed param:\n// - resolves functions that return a promise, and return with the promises value\n// - resolves functions and return with the returned value\n// - resolves with the passed in value\nexport default function getparamvalue<T>(v: T): Promise<T> {\n\treturn new Promise((resolve, reject): void => {\n\t\tif (typeof v === 'function') {\n\t\t\tresolve(Promise.resolve(v.call(this)));\n\t\t} else {\n\t\t\tresolve(v);\n\t\t}\n\t});\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./getparamvalue.js\n **/"],"sourceRoot":""}