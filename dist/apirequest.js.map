{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///apirequest.js","webpack:///webpack/bootstrap e0448f2d1b0a838898fd","webpack:///./apirequest.js","webpack:///./getparamvalue.js","webpack:///./requestparams.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","apiopts","arguments","length","undefined","responseTransform","responseTransformer","data","paramTransform","paramTransformer","pars","get","url","params","options","method","paramsOverride","optionsOverride","Promise","all","map","_getparamvalue2","then","createParams","parseParams","runRequest","defaultResponseTransform","post","put","delete","Object","defineProperty","value","_getparamvalue","_requestparams","_requestparams2","parse","assign","body","json","fetch","resp","ok","reject","getparamvalue","v","_this","resolve","_classCallCheck","instance","Constructor","TypeError","_typeof","Symbol","iterator","constructor","prototype","_createClass","defineProperties","target","props","i","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","RequestParams","urlParams","match","paramsUsed","slice","reduce","replace","keys","filter","indexOf","k","Array","encodeURIComponent","join"],"mappings":"CAAA,SAAAA,EAAAC,GACA,gBAAAC,UAAA,gBAAAC,QACAA,OAAAD,QAAAD,IACA,kBAAAG,gBAAAC,IACAD,UAAAH,GACA,gBAAAC,SACAA,QAAA,WAAAD,IAEAD,EAAA,WAAAC,KACCK,KAAA,WACD,MCAgB,UAAUC,GCN1B,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAP,OAGA,IAAAC,GAAAO,EAAAD,IACAP,WACAS,GAAAF,EACAG,QAAA,EAUA,OANAL,GAAAE,GAAAI,KAAAV,EAAAD,QAAAC,IAAAD,QAAAM,GAGAL,EAAAS,QAAA,EAGAT,EAAAD,QAvBA,GAAAQ,KAqCA,OATAF,GAAAM,EAAAP,EAGAC,EAAAO,EAAAL,EAGAF,EAAAQ,EAAA,GAGAR,EAAA,KDgBM,SAASL,EAAQD,EAASM,GAE/B,YAeA,SAASS,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GEtDzE,QAASjB,KAA8B,GAAtBoB,GAAsBC,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,MAEjDG,EAAoBJ,EAAQK,qBAAwB,SAACC,GAAD,MAAgDA,IACpGC,EAAiBP,EAAQQ,kBAAqB,SAACC,GAAD,MAAwCA,GAE1F,QACCC,IAAK,SAACC,GAAqE,GAAxDC,GAAwDX,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,MAAnCY,EAAmCZ,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,KAE1E,OADAY,GAAQC,OAAS,MACV,WAAkF,GAAjFC,GAAiFd,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,MAApDe,EAAoDf,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,KACxF,OAAOgB,SAAQC,KAAKP,EAAKC,EAAQG,EAAgBF,EAASG,GAAiBG,IAAxDC,eAEjBC,KAAKC,GAELD,KAAKd,GAELc,KAAKE,GAELF,KAAKG,GAELH,KAAKI,GAELJ,KAAKjB,KAGTsB,KAAM,SAACf,GAAqE,GAAxDC,GAAwDX,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,MAAnCY,EAAmCZ,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,KAE3E,OADAY,GAAQC,OAAS,OACV,WAAkF,GAAjFC,GAAiFd,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,MAApDe,EAAoDf,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,KACxF,OAAOgB,SAAQC,KAAKP,EAAKC,EAAQG,EAAgBF,EAASG,GAAiBG,IAAxDC,eACjBC,KAAKC,GACLD,KAAKd,GACLc,KAAKE,GACLF,KAAKG,GACLH,KAAKI,GACLJ,KAAKjB,KAGTuB,IAAK,SAAChB,GAAqE,GAAxDC,GAAwDX,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,MAAnCY,EAAmCZ,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,KAE1E,OADAY,GAAQC,OAAS,MACV,WAAkF,GAAjFC,GAAiFd,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,MAApDe,EAAoDf,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,KACxF,OAAOgB,SAAQC,KAAKP,EAAKC,EAAQG,EAAgBF,EAASG,GAAiBG,IAAxDC,eACjBC,KAAKC,GACLD,KAAKd,GACLc,KAAKE,GACLF,KAAKG,GACLH,KAAKI,GACLJ,KAAKjB,KAGTwB,SAAQ,SAACjB,GAAqE,GAAxDC,GAAwDX,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,MAAnCY,EAAmCZ,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,KAE7E,OADAY,GAAQC,OAAS,SACV,WAAkF,GAAjFC,GAAiFd,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,MAApDe,EAAoDf,UAAAC,OAAA,GAAAC,SAAAF,UAAA,GAAAA,UAAA,KACxF,OAAOgB,SAAQC,KAAKP,EAAKC,EAAQG,EAAgBF,EAASG,GAAiBG,IAAxDC,eACjBC,KAAKC,GACLD,KAAKd,GACLc,KAAKE,GACLF,KAAKG,GACLH,KAAKI,GACLJ,KAAKjB,MFhBVyB,OAAOC,eAAejD,EAAS,cAC9BkD,OAAO,IAERlD,aE5CuBD,CAhBxB,IAAAoD,GAAA7C,EAAA,GFgEKiC,EAAkBxB,EAAuBoC,GE/D9CC,EAAA9C,EAAA,GFmEK+C,EAAkBtC,EAAuBqC,GEjE1CX,EAAe,SAACb,GAAD,MAAqC,IAAAyB,cAAkBzB,IACtEc,EAAc,SAACd,GAAD,MAAwCA,GAAK0B,SAE3DX,EAAa,SAACf,GACjB,GAAII,GAAUgB,OAAOO,UAAW3B,EAAKI,SACpCwB,KAAM5B,EAAKG,OACX0B,MAAM,GAEP,OAAOC,OAAM9B,EAAKE,IAAKE,IAGpBY,EAA2B,SAACe,GAAD,MAAoBA,GAAKF,OAAOjB,KAAK,SAAAiB,GAAA,MAAQE,GAAKC,GAAKH,EAAOrB,QAAQyB,OAAOJ,KFyJ3GxD,GAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,GAEtB,YGzKc,SAAS8D,GAAeC,GAAsB,GAAAC,GAAA5D,IAC5D,OAAO,IAAIgC,SAAQ,SAAC6B,EAASJ,GAE3BI,EADgB,kBAANF,GACF3B,QAAQ6B,QAAQF,EAAEpD,KAAFqD,IAEhBD,KHsKVf,OAAOC,eAAejD,EAAS,cAC9BkD,OAAO,IAERlD,aG9KuB8D,EH+LvB7D,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,GAEtB,YAUA,SAASkE,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCARhHrB,OAAOC,eAAejD,EAAS,cAC9BkD,OAAO,GAGR,IAAIoB,GAA4B,kBAAXC,SAAoD,gBAApBA,QAAOC,SAAwB,SAAUxD,GAAO,aAAcA,IAAS,SAAUA,GAAO,MAAOA,IAAyB,kBAAXuD,SAAyBvD,EAAIyD,cAAgBF,QAAUvD,IAAQuD,OAAOG,UAAY,eAAkB1D,IAElQ2D,EAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAMzD,OAAQ0D,IAAK,CAAE,GAAIC,GAAaF,EAAMC,EAAIC,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMnC,OAAOC,eAAe4B,EAAQG,EAAWI,IAAKJ,IAAiB,MAAO,UAAUZ,EAAaiB,EAAYC,GAAiJ,MAA9HD,IAAYT,EAAiBR,EAAYM,UAAWW,GAAiBC,GAAaV,EAAiBR,EAAakB,GAAqBlB,MIhN5gBmB,EJqNA,WIhNpB,QAAAA,GAAY3D,GAAkBsC,EAAA9D,KAAAmF,GAC7BnF,KAAK2B,OAASiB,OAAOO,UAAW3B,EAAK,GAAIA,EAAK,IAC9CxB,KAAK4B,QAAUgB,OAAOO,UAAW3B,EAAK,GAAIA,EAAK,IAC/CxB,KAAK0B,IAAMF,EAAK,GJ0PhB,MApCA+C,GAAaY,IACZH,IAAK,QACLlC,MAAO,WIrND,GAAAc,GAAA5D,KAGHoF,EAAYpF,KAAK0B,IAAI2D,MAAM,iBAC/B,IAAID,EAAW,CACd,GAAIE,GAAaF,EAAUlD,IAAI,SAACxB,GAAD,MAAOA,GAAE6E,MAAM,OAC9CvF,MAAK0B,IAAM4D,EAAWE,OAAO,SAAC9D,EAAKhB,GAAN,MAAYgB,GAAI+D,QAAQ,KAAO/E,EAAI,KAAMkD,EAAKjC,OAAOjB,KAAKV,KAAK0B,KAC5F1B,KAAK2B,OAASiB,OAAO8C,KAAK1F,KAAK2B,QAC7BgE,OAAO,SAACjF,GAAD,MAAO4E,GAAWM,QAAQlF,UACjC8E,OAAO,SAAC9E,EAAGmF,GAEX,MADAnF,GAAEmF,GAAKjC,EAAKjC,OAAOkE,GACZnF,OAaV,MAR4B,QAAxBV,KAAK4B,QAAQC,SAA6C,WAAvBqC,EAAOlE,KAAK2B,SAAuBiB,OAAO8C,KAAK1F,KAAK2B,QAAQV,QAAYjB,KAAK2B,iBAAkBmE,QAAS9F,KAAK2B,OAAOV,UAE1JjB,KAAK0B,KAAO,IAAMkB,OAAO8C,KAAK1F,KAAK2B,QACjCO,IAAI,SAAA8C,GAAA,MAAOA,GAAM,IAAMe,mBAAmBnC,EAAKjC,OAAOqD,MACtDgB,KAAK,KAEPhG,KAAK2B,WAEC3B,SJ+NAmF,IAGRvF,cIrQoBuF,EJsQpBtF,EAAOD,QAAUA,EAAQ","file":"apirequest.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"apirequest\"] = factory();\n\telse\n\t\troot[\"apirequest\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"apirequest\"] = factory();\n\telse\n\t\troot[\"apirequest\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.default = factory;\n\t\n\tvar _getparamvalue = __webpack_require__(1);\n\t\n\tvar _getparamvalue2 = _interopRequireDefault(_getparamvalue);\n\t\n\tvar _requestparams = __webpack_require__(2);\n\t\n\tvar _requestparams2 = _interopRequireDefault(_requestparams);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar createParams = function createParams(pars) {\n\t\treturn new _requestparams2.default(pars);\n\t};\n\tvar parseParams = function parseParams(pars) {\n\t\treturn pars.parse();\n\t};\n\t\n\tvar runRequest = function runRequest(pars) {\n\t\tvar options = Object.assign({}, pars.options, {\n\t\t\tbody: pars.params,\n\t\t\tjson: true\n\t\t});\n\t\treturn fetch(pars.url, options);\n\t};\n\t\n\tvar defaultResponseTransform = function defaultResponseTransform(resp) {\n\t\treturn resp.json().then(function (json) {\n\t\t\treturn resp.ok ? json : Promise.reject(json);\n\t\t});\n\t};\n\t\n\tfunction factory() {\n\t\tvar apiopts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t\n\t\tvar responseTransform = apiopts.responseTransformer || function (data) {\n\t\t\treturn data;\n\t\t};\n\t\tvar paramTransform = apiopts.paramTransformer || function (pars) {\n\t\t\treturn pars;\n\t\t};\n\t\n\t\treturn {\n\t\t\tget: function get(url) {\n\t\t\t\tvar params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\t\t\tvar options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t\t\t\toptions.method = 'GET';\n\t\t\t\treturn function () {\n\t\t\t\t\tvar paramsOverride = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\t\t\t\tvar optionsOverride = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\n\t\t\t\t\treturn Promise.all([url, params, paramsOverride, options, optionsOverride].map(_getparamvalue2.default))\n\t\t\t\t\t// create params from all the passed promises and whatnot\n\t\t\t\t\t.then(createParams)\n\t\t\t\t\t// run a custom user provided transformer on the request params object\n\t\t\t\t\t.then(paramTransform)\n\t\t\t\t\t// parse the parameters ;-)\n\t\t\t\t\t.then(parseParams)\n\t\t\t\t\t// run the request\n\t\t\t\t\t.then(runRequest)\n\t\t\t\t\t// run the response through a default transformer that checks simply for valid json\n\t\t\t\t\t.then(defaultResponseTransform)\n\t\t\t\t\t// run the custom user provided response transformer\n\t\t\t\t\t.then(responseTransform);\n\t\t\t\t};\n\t\t\t},\n\t\t\tpost: function post(url) {\n\t\t\t\tvar params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\t\t\tvar options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t\t\t\toptions.method = 'POST';\n\t\t\t\treturn function () {\n\t\t\t\t\tvar paramsOverride = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\t\t\t\tvar optionsOverride = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\n\t\t\t\t\treturn Promise.all([url, params, paramsOverride, options, optionsOverride].map(_getparamvalue2.default)).then(createParams).then(paramTransform).then(parseParams).then(runRequest).then(defaultResponseTransform).then(responseTransform);\n\t\t\t\t};\n\t\t\t},\n\t\t\tput: function put(url) {\n\t\t\t\tvar params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\t\t\tvar options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t\t\t\toptions.method = 'PUT';\n\t\t\t\treturn function () {\n\t\t\t\t\tvar paramsOverride = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\t\t\t\tvar optionsOverride = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\n\t\t\t\t\treturn Promise.all([url, params, paramsOverride, options, optionsOverride].map(_getparamvalue2.default)).then(createParams).then(paramTransform).then(parseParams).then(runRequest).then(defaultResponseTransform).then(responseTransform);\n\t\t\t\t};\n\t\t\t},\n\t\t\tdelete: function _delete(url) {\n\t\t\t\tvar params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\t\t\tvar options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t\t\t\toptions.method = 'DELETE';\n\t\t\t\treturn function () {\n\t\t\t\t\tvar paramsOverride = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\t\t\t\tvar optionsOverride = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\n\t\t\t\t\treturn Promise.all([url, params, paramsOverride, options, optionsOverride].map(_getparamvalue2.default)).then(createParams).then(paramTransform).then(parseParams).then(runRequest).then(defaultResponseTransform).then(responseTransform);\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.default = getparamvalue;\n\t\n\t// returns a promise that resolves with the final value of the passed param:\n\t// - resolves functions that return a promise, and return with the promises value\n\t// - resolves functions and return with the returned value\n\t// - resolves with the passed in value\n\tfunction getparamvalue(v) {\n\t\tvar _this = this;\n\t\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tif (typeof v === 'function') {\n\t\t\t\tresolve(Promise.resolve(v.call(_this)));\n\t\t\t} else {\n\t\t\t\tresolve(v);\n\t\t\t}\n\t\t});\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t// TODO: refactor the hell out of the class\n\tvar RequestParams = function () {\n\t\tfunction RequestParams(pars) {\n\t\t\t_classCallCheck(this, RequestParams);\n\t\n\t\t\tthis.params = Object.assign({}, pars[1], pars[2]);\n\t\t\tthis.options = Object.assign({}, pars[3], pars[4]);\n\t\t\tthis.url = pars[0];\n\t\t}\n\t\n\t\t_createClass(RequestParams, [{\n\t\t\tkey: 'parse',\n\t\t\tvalue: function parse() {\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\t// check if the url contains any template strings, replace them with values in the params object\n\t\t\t\t// returned object contains the url, the final query params and request options\n\t\t\t\tvar urlParams = this.url.match(/\\{\\{(.+?)\\}\\}/g);\n\t\t\t\tif (urlParams) {\n\t\t\t\t\tvar paramsUsed = urlParams.map(function (p) {\n\t\t\t\t\t\treturn p.slice(2, -2);\n\t\t\t\t\t});\n\t\t\t\t\tthis.url = paramsUsed.reduce(function (url, p) {\n\t\t\t\t\t\treturn url.replace('{{' + p + '}}', _this.params[p]);\n\t\t\t\t\t}, this.url);\n\t\t\t\t\tthis.params = Object.keys(this.params).filter(function (p) {\n\t\t\t\t\t\treturn paramsUsed.indexOf(p) === -1;\n\t\t\t\t\t}).reduce(function (p, k) {\n\t\t\t\t\t\tp[k] = _this.params[k];\n\t\t\t\t\t\treturn p;\n\t\t\t\t\t}, {});\n\t\t\t\t}\n\t\n\t\t\t\t// handle query params nicely for GET requests\n\t\t\t\tif (this.options.method === 'GET' && (_typeof(this.params) === 'object' && Object.keys(this.params).length || this.params instanceof Array && this.params.length)) {\n\t\t\t\t\t// append data to the url as encoded query params\n\t\t\t\t\tthis.url += '?' + Object.keys(this.params).map(function (key) {\n\t\t\t\t\t\treturn key + '=' + encodeURIComponent(_this.params[key]);\n\t\t\t\t\t}).join('&');\n\t\t\t\t\t// empty the params array, since they're now part of the query\n\t\t\t\t\tthis.params = {};\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn RequestParams;\n\t}();\n\t\n\texports.default = RequestParams;\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** apirequest.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap e0448f2d1b0a838898fd\n **/","// @flow\nimport getparamvalue from './getparamvalue';\nimport RequestParams from './requestparams';\n\nvar createParams = (pars: Array<any>): RequestParams => new RequestParams(pars)\nvar parseParams = (pars: RequestParams): RequestParams => pars.parse();\n\nvar runRequest = (pars: RequestParams): Promise<Response> => {\n\tlet options = Object.assign({}, pars.options, {\n\t\tbody: pars.params,\n\t\tjson: true\n\t});\n\treturn fetch(pars.url, options);\n}\n\nvar defaultResponseTransform = (resp: Response) => resp.json().then(json => resp.ok ? json : Promise.reject(json));\n\nexport default function factory(apiopts: Object = {}) {\n\n\tlet responseTransform = apiopts.responseTransformer || ((data: Promise<Response>): Promise<Response> => data);\n\tlet paramTransform = apiopts.paramTransformer || ((pars: RequestParams): RequestParams => pars);\n\n\treturn {\n\t\tget: (url: string, params: Object = {}, options: Object = {}): Function => {\n\t\t\toptions.method = 'GET';\n\t\t\treturn (paramsOverride: Object = {}, optionsOverride: Object = {}): Promise<Response> => {\n\t\t\t\treturn Promise.all([url, params, paramsOverride, options, optionsOverride].map(getparamvalue))\n\t\t\t\t\t// create params from all the passed promises and whatnot\n\t\t\t\t\t.then(createParams)\n\t\t\t\t\t// run a custom user provided transformer on the request params object\n\t\t\t\t\t.then(paramTransform)\n\t\t\t\t\t// parse the parameters ;-)\n\t\t\t\t\t.then(parseParams)\n\t\t\t\t\t// run the request\n\t\t\t\t\t.then(runRequest)\n\t\t\t\t\t// run the response through a default transformer that checks simply for valid json\n\t\t\t\t\t.then(defaultResponseTransform)\n\t\t\t\t\t// run the custom user provided response transformer\n\t\t\t\t\t.then(responseTransform);\n\t\t\t}\n\t\t},\n\t\tpost: (url: string, params: Object = {}, options: Object = {}): Function => {\n\t\t\toptions.method = 'POST';\n\t\t\treturn (paramsOverride: Object = {}, optionsOverride: Object = {}): Promise<Response> => {\n\t\t\t\treturn Promise.all([url, params, paramsOverride, options, optionsOverride].map(getparamvalue))\n\t\t\t\t\t.then(createParams)\n\t\t\t\t\t.then(paramTransform)\n\t\t\t\t\t.then(parseParams)\n\t\t\t\t\t.then(runRequest)\n\t\t\t\t\t.then(defaultResponseTransform)\n\t\t\t\t\t.then(responseTransform);\n\t\t\t}\n\t\t},\n\t\tput: (url: string, params: Object = {}, options: Object = {}): Function => {\n\t\t\toptions.method = 'PUT';\n\t\t\treturn (paramsOverride: Object = {}, optionsOverride: Object = {}): Promise<Response> => {\n\t\t\t\treturn Promise.all([url, params, paramsOverride, options, optionsOverride].map(getparamvalue))\n\t\t\t\t\t.then(createParams)\n\t\t\t\t\t.then(paramTransform)\n\t\t\t\t\t.then(parseParams)\n\t\t\t\t\t.then(runRequest)\n\t\t\t\t\t.then(defaultResponseTransform)\n\t\t\t\t\t.then(responseTransform);\n\t\t\t}\n\t\t},\n\t\tdelete: (url: string, params: Object = {}, options: Object = {}): Function => {\n\t\t\toptions.method = 'DELETE';\n\t\t\treturn (paramsOverride: Object = {}, optionsOverride: Object = {}): Promise<Response> => {\n\t\t\t\treturn Promise.all([url, params, paramsOverride, options, optionsOverride].map(getparamvalue))\n\t\t\t\t\t.then(createParams)\n\t\t\t\t\t.then(paramTransform)\n\t\t\t\t\t.then(parseParams)\n\t\t\t\t\t.then(runRequest)\n\t\t\t\t\t.then(defaultResponseTransform)\n\t\t\t\t\t.then(responseTransform);\n\t\t\t}\n\t\t}\n\t};\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./apirequest.js\n **/","// @flow\n// returns a promise that resolves with the final value of the passed param:\n// - resolves functions that return a promise, and return with the promises value\n// - resolves functions and return with the returned value\n// - resolves with the passed in value\nexport default function getparamvalue (v: any): Promise<any> {\n\treturn new Promise((resolve, reject): void => {\n\t\tif (typeof v === 'function') {\n\t\t\tresolve(Promise.resolve(v.call(this)));\n\t\t} else {\n\t\t\tresolve(v);\n\t\t}\n\t});\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./getparamvalue.js\n **/","// @flow\n// TODO: refactor the hell out of the class\nexport default class RequestParams {\n\tparams: Object;\n\toptions: Object;\n\turl: string;\n\n\tconstructor(pars: Array<any>) {\n\t\tthis.params = Object.assign({}, pars[1], pars[2]);\n\t\tthis.options = Object.assign({}, pars[3], pars[4]);\n\t\tthis.url = pars[0];\n\t}\n\n\tparse() {\n\t\t// check if the url contains any template strings, replace them with values in the params object\n\t\t// returned object contains the url, the final query params and request options\n\t\tvar urlParams = this.url.match(/\\{\\{(.+?)\\}\\}/g);\n\t\tif (urlParams) {\n\t\t\tvar paramsUsed = urlParams.map((p) => p.slice(2, -2));\n\t\t\tthis.url = paramsUsed.reduce((url, p) => url.replace('{{' + p + '}}', this.params[p]), this.url);\n\t\t\tthis.params = Object.keys(this.params)\n\t\t\t\t.filter((p) => paramsUsed.indexOf(p) === -1)\n\t\t\t\t.reduce((p, k) => {\n\t\t\t\t\tp[k] = this.params[k];\n\t\t\t\t\treturn p;\n\t\t\t\t}, {});\n\t\t}\n\n\t\t// handle query params nicely for GET requests\n\t\tif (this.options.method === 'GET' && ((typeof this.params === 'object' && Object.keys(this.params).length) || (this.params instanceof Array && this.params.length))) {\n\t\t\t// append data to the url as encoded query params\n\t\t\tthis.url += '?' + Object.keys(this.params)\n\t\t\t\t.map(key => key + '=' + encodeURIComponent(this.params[key]))\n\t\t\t\t.join('&');\n\t\t\t// empty the params array, since they're now part of the query\n\t\t\tthis.params = {};\n\t\t}\n\t\treturn this;\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./requestparams.js\n **/"],"sourceRoot":""}